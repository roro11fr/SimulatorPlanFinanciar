{% load static %}
{% load simulator_extras %}

<h2>Rezultat Simulare</h2>

<p><strong>Data:</strong> {{ simulare.created_at }}</p>
<p><strong>InvestiÈ›ie iniÈ›ialÄƒ:</strong> {{ simulare.initial_investment }} RON</p>

{% if simulare.investment_plan.monthly_contribution %}
<p><strong>ContribuÈ›ii lunare:</strong> {{ simulare.investment_plan.monthly_contribution }} RON</p>
{% endif %}

<p><strong>Index bursier:</strong> {{ simulare.investment_plan.get_stock_index_display }}</p>
<p><strong>Ani:</strong> {{ simulare.years }}</p>

{% comment %} <!-- AfiÈ™eazÄƒ doar cardul asociat cu nivelul de risc -->
<div class="row mt-4 mb-4">
  {% if simulare.risk_level == "low" %}
    <div class="col-md-12">
      <div class="card border-success">
        <div class="card-body">
          <h5 class="card-title">
            ğŸŸ¢ Risc ScÄƒzut
          </h5>
          <p class="card-text">
            Portofoliu conservator, concentrat pe stabilitate È™i siguranÈ›Äƒ.
            Randamente mai mici dar constante, ideal pentru investiÈ›ii pe termen lung cu focus pe pÄƒstrarea capitalului.
          </p>
        </div>
      </div>
    </div>
  {% elif simulare.risk_level == "medium" %}
    <div class="col-md-12">
      <div class="card border-warning">
        <div class="card-body">
          <h5 class="card-title">
            ğŸ”µ Risc Mediu
          </h5>
          <p class="card-text">
            Echilibru Ã®ntre risc È™i randament. Portofoliu diversificat care combinÄƒ stabilitatea cu oportunitÄƒÈ›i de creÈ™tere. Ideal pentru investitori care cautÄƒ creÈ™tere moderatÄƒ.
          </p>
        </div>
      </div>
    </div>
  {% elif simulare.risk_level == "high" %}
    <div class="col-md-12">
      <div class="card border-danger">
        <div class="card-body">
          <h5 class="card-title">
            ğŸ”´ Risc Ridicat
          </h5>
          <p class="card-text">
            Strategie agresivÄƒ, concentratÄƒ pe maximizarea randamentelor.
            Volatilitate ridicatÄƒ dar cu potenÈ›ial de profit major. Recomandat pentru investitori cu toleranÈ›Äƒ mare la risc.
          </p>
        </div>
      </div>
    </div>
  {% endif %}
</div> {% endcomment %}

<hr>

<div class="interactive-plot">
  {{ chart_html|safe }}

  <div class="mt-4" style="padding: 1rem; border: 1px solid #ccc; border-radius: 6px; background-color: #f9f9f9;">
    <h4>ğŸ“˜ Cum sÄƒ interpretezi graficul:</h4>
    <ul style="list-style: disc; padding-left: 1.5rem;">
      <li><strong>ğŸ”µ Linia albastrÄƒ</strong> aratÄƒ <u>valoarea medie</u> a portofoliului Ã®n 500 de simulÄƒri.</li>
      <li><strong>ğŸŸ© Linia verde Ã®ntreruptÄƒ</strong> aratÄƒ <u>contribuÈ›iile totale</u> investite lunar.</li>
      <li><strong>ğŸ”· Banda albastrÄƒ deschisÄƒ</strong> aratÄƒ intervalul Ã®n care se aflÄƒ 80% din simulÄƒri (10%â€“90%).</li>
    </ul>
    <p style="margin-top: 1rem;"><strong>â„¹ï¸ NotÄƒ:</strong> Este normal ca portofoliul sÄƒ fie uneori sub contribuÈ›ii, mai ales Ã®n condiÈ›ii de risc È™i volatilitate.</p>
  </div>
</div>

<hr>

<div class="mt-4">
  <a href="{% url 'istoric_simulari' plan.id %}" class="btn btn-sm btn-secondary">Vezi istoric</a>
  <a href="{% url 'dashboard' %}" class="btn btn-primary">Ãnapoi la dashboard</a>
</div>

{% if simulare.result_data %}
  <h3>Date Rezultate</h3>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>PerioadÄƒ</th>
        <th>Valoare FinalÄƒ</th>
      </tr>
    </thead>
    <tbody>
      {% for data in simulare.result_data %}
        <tr>
          <td>{{ data.period }}</td>
          <td>{{ data.final_value }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
